<html>
  <head>
    <script type="text/javascript" src="/js/geo.js"></script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <link rel="stylesheet" type="text/css" href="/css/main.css"></link>
  </head>

  <body>
    <div><strong>A HTML5 geolocation API demo:</strong> Using HTML5 GeoLocation API, this app shows your current location in Google Maps.</div>
    <div id="map_viz"></div>
    <a href="https://github.com/ashish0x90/WhereAmI"><img id="github-ribbon" src="https://assets1.github.com/img/7afbc8b248c68eb468279e8c17986ad46549fb71?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_right_darkblue_121621.png&path=" alt="Fork me on GitHub"></a>

    <script type="text/javascript">
      function loadMap(lat, long, locationString) {
      google.load("visualization", "1", {packages:["map"], "callback" : drawMap});
      function drawMap() {
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'Lat');
        data.addColumn('number', 'Lon');
        data.addColumn('string', 'Name');
        data.addRows(1);
        data.setCell(0, 0, lat);
        data.setCell(0, 1, long);
        data.setCell(0, 2, locationString);
        var map = new google.visualization.Map(document.getElementById('map_viz'));
      map.draw(data, {showTip: true, mapType:'normal', useMapTypeControl:true, zoomLevel: 17, enableScrollWheel: true});
      }

}

function errorCallback(geoErrorObj) {
	 alert('Error : '+geoErrorObj.code);
}

function successCallback(position) {
var locationString = "Latitude:" + position.coords.latitude + ", Longitude: " + position.coords.longitude + "</br>With Accuracy: "+position.coords.accuracy;
loadMap(position.coords.latitude, position.coords.longitude, locationString);
}
if(geo_position_js.init()){
   geo_position_js.getCurrentPosition(successCallback , errorCallback , {timeout:10000, maximumAge: 75000});
}
else{
   alert("Geolocation functionality doesn't seem to be available on your device");
}

</script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2970497-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


  </body>
</html>
